<!DOCTYPE html> 
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>AMIKO</title>

  <!-- FAVICON (CORREGIDO) -->
  <link rel="icon" type="image/png" href="favicon.png">

  <link rel="stylesheet" href="styles.css" />
</head>
<body>

  <!-- SPLASH SCREEN -->
  <div id="splash">
    <canvas id="particles"></canvas>

    <div class="splash-content">
      <h1 class="logo">AMIKO</h1>
      <p id="phrase" class="phrase"></p>

      <div id="loader" class="loader"></div>
      <button id="enterBtn" class="enter-btn">Entrar</button>
    </div>

    <audio id="introSound"
      src="https://cdn.pixabay.com/audio/2021/09/20/audio_0b1aa8f490.mp3">
    </audio>
  </div>

  <!-- MODAL DE AUTENTICACIÃ“N -->
  <div id="authModal" class="auth-modal">
    <div class="auth-card">
      <h2 class="auth-title">Â¿CÃ³mo quieres continuar?</h2>
      <p class="muted-auth">Selecciona un mÃ©todo para iniciar tu experiencia.</p>

      <button id="loginBtn" class="auth-btn primary-auth">Iniciar sesiÃ³n</button>
      <button id="registerBtn" class="auth-btn">Registrarse</button>
      <button id="guestBtn" class="auth-btn ghost-auth">Continuar en modo fantasma ğŸ‘»</button>
    </div>
  </div>

  <!-- TOPBAR -->
  <div class="topbar">
    <div class="brand-mini">
      <!-- AVATAR CORREGIDO -->
      <img id="avatarMini" src="images/amiko_logo.png" alt="AMIKO" />
      <input id="botName" class="bot-name" value="AMIKO"
             maxlength="20" aria-label="Nombre del asistente" />
    </div>

    <div class="top-actions">
      <button id="darkToggle" title="Modo oscuro">ğŸŒ™</button>
      <button id="clearAll" title="Limpiar conversaciÃ³n">ğŸ§¹</button>
    </div>
  </div>

  <!-- APP -->
  <div class="app">

    <!-- PANEL LATERAL -->
    <aside class="panel">
      <div class="brand">
        <img src="images/amiko_logo.png" alt="Logo AMIKO"
             style="width:85px;height:auto;margin-right:12px;" />

        <div>
          <h2 id="brandTitle">AMIKO</h2>
          <p class="muted">Asistente emocional â€” enfoque psicolÃ³gico</p>
        </div>
      </div>

      <div class="controls">

        <label for="persona">Personalidad / Estilo</label>
        <select id="persona">
          <option value="empathetic">EmpÃ¡tico (por defecto)</option>
          <option value="psychologist">PsicolÃ³gico (profundo)</option>
          <option value="coach">Coach (orientado a acciones)</option>
          <option value="friend">Amigo (informal)</option>
        </select>

        <label class="toggle-label">
          <input id="voiceToggle" type="checkbox" />
          Activar voz (TTS)
        </label>

        <label class="toggle-label">
          <input id="autovibe" type="checkbox" checked />
          VibraciÃ³n al enviar (si disponible)
        </label>
      </div>

      <!-- EMOJI SHORTCUTS -->
      <div class="emo-section">
        <p class="muted">Atajos emocionales</p>
        <div class="emo-row">
          <button class="emo-btn" data-emo="happy" title="Feliz">ğŸ˜Š</button>
          <button class="emo-btn" data-emo="sad" title="Triste">ğŸ˜¢</button>
          <button class="emo-btn" data-emo="stressed" title="Estresado">ğŸ˜°</button>
          <button class="emo-btn" data-emo="neutral" title="Neutral">ğŸ˜</button>
        </div>
      </div>

      <!-- HISTORIAL -->
      <div class="history-card">
        <div class="history-header">
          <strong>Historial emocional</strong>
          <div>
            <button id="exportBtn" title="Exportar conversaciÃ³n">â¬‡ï¸</button>
            <button id="clearHistory" title="Borrar historial">ğŸ—‘ï¸</button>
          </div>
        </div>

        <div id="historyList" class="history-list"
             role="log" aria-live="polite"></div>
      </div>
    </aside>

    <!-- MAIN -->
    <main class="main">
      <header class="chat-header">
        <div>
          <h3 id="sessionTitle">ConversaciÃ³n</h3>
          <p id="sessionSubtitle" class="muted">
            Tu conversaciÃ³n se guarda en tu navegador (local).
          </p>
        </div>

        <div class="header-actions">
          <button id="downloadTranscript">Exportar TXT</button>
        </div>
      </header>

      <section class="chat-area">
        <div id="chatBox" class="chat-box"
             role="log" aria-live="polite"></div>

        <div id="typingIndicator" class="typing-indicator" aria-hidden="true">
          <span class="dot dot-1"></span>
          <span class="dot dot-2"></span>
          <span class="dot dot-3"></span>
        </div>
      </section>

      <!-- COMPOSER -->
      <div class="composer">
        <div class="composer-left">
          <button id="micBtn" title="Usar micrÃ³fono">ğŸ™ï¸</button>
        </div>

        <input id="userInput" type="text"
               placeholder="CuÃ©ntame... (Enter para enviar)"
               autocomplete="off" />

        <div class="composer-right">
          <button id="sendBtn" class="primary">Enviar</button>
        </div>
      </div>

    </main>
  </div>

  <!-- SOUNDS -->
  <audio id="sendSound" src="sounds/send.mp3" preload="auto"></audio>
  <audio id="receiveSound" src="sounds/receive.mp3" preload="auto"></audio>

  <script src="app.js"></script>
</body>
</html>
